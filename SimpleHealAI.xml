<Ui xmlns="http://www.blizzard.com/wow/ui/">
    <Script file="SimpleHealAI.lua"/>

    <!-- Tooltip for spell parsing -->
    <GameTooltip name="SimpleHealAI_Tooltip" inherits="GameTooltipTemplate" hidden="true"/>

    <!-- Main frame -->
    <Frame name="SimpleHealAI_Frame">
        <Scripts>
            <OnLoad>SimpleHealAI:OnLoad();</OnLoad>
            <OnEvent>SimpleHealAI:OnEvent(event);</OnEvent>
        </Scripts>
    </Frame>

    <!-- Config frame -->
    <Frame name="SimpleHealAI_ConfigFrame" toplevel="true" movable="true" enableMouse="true" frameStrata="DIALOG" hidden="true">
        <Size><AbsDimension x="240" y="320"/></Size>
        <Anchors><Anchor point="CENTER"/></Anchors>
        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
            <BackgroundInsets><AbsInset left="11" right="12" top="12" bottom="11"/></BackgroundInsets>
            <TileSize><AbsValue val="32"/></TileSize>
            <EdgeSize><AbsValue val="32"/></EdgeSize>
        </Backdrop>
        <Layers>
            <Layer level="ARTWORK">
                <FontString name="SimpleHealAI_ConfigTitle" inherits="GameFontNormalLarge" text="SimpleHealAI">
                    <Anchors><Anchor point="TOP" relativePoint="TOP"><Offset><AbsDimension x="0" y="-16"/></Offset></Anchor></Anchors>
                </FontString>
            </Layer>
        </Layers>
        <Frames>
            <Button name="SimpleHealAI_CloseBtn" inherits="UIPanelCloseButton">
                <Anchors><Anchor point="TOPRIGHT"><Offset><AbsDimension x="-5" y="-5"/></Offset></Anchor></Anchors>
            </Button>

            <!-- Heal Mode -->
            <FontString name="SimpleHealAI_ModeLabel" inherits="GameFontNormal" text="Heal Mode:">
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-45"/></Offset></Anchor></Anchors>
            </FontString>
            <Button name="SimpleHealAI_ModeEff" inherits="UIPanelButtonTemplate" text="Eff">
                <Size><AbsDimension x="95" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-62"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHealAI:SetHealMode(1);</OnClick>
                    <OnEnter>SimpleHealAI:ShowTooltip("Efficient: best healing/mana ratio.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Button>
            <Button name="SimpleHealAI_ModeSmart" inherits="UIPanelButtonTemplate" text="Smart">
                <Size><AbsDimension x="95" y="24"/></Size>
                <Anchors><Anchor point="LEFT" relativeTo="SimpleHealAI_ModeEff" relativePoint="RIGHT"><Offset><AbsDimension x="10" y="0"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHealAI:SetHealMode(2);</OnClick>
                    <OnEnter>SimpleHealAI:ShowTooltip("Smart: smallest rank covering deficit.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Button>

            <!-- Toggles (LOS & Cleanse) using CheckButtons -->
            <CheckButton name="SimpleHealAI_ModeLOSCheck" inherits="OptionsCheckButtonTemplate">
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-100"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHealAI:ToggleLOS();</OnClick>
                    <OnEnter>SimpleHealAI:ShowTooltip("Check Line of Sight before healing.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </CheckButton>
            <FontString name="SimpleHealAI_ModeLOSLabel" inherits="GameFontNormal" text="Line of Sight Check">
                <Anchors><Anchor point="LEFT" relativeTo="SimpleHealAI_ModeLOSCheck" relativePoint="RIGHT"><Offset><AbsDimension x="5" y="0"/></Offset></Anchor></Anchors>
            </FontString>

            <FontString name="SimpleHealAI_ModeLOSLabel" inherits="GameFontNormal" text="Line of Sight Check">
                <Anchors><Anchor point="LEFT" relativeTo="SimpleHealAI_ModeLOSCheck" relativePoint="RIGHT"><Offset><AbsDimension x="5" y="0"/></Offset></Anchor></Anchors>
            </FontString>

            <!-- Message Mode -->
            <FontString name="SimpleHealAI_MsgLabel" inherits="GameFontNormal" text="Chat Messages:">
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-140"/></Offset></Anchor></Anchors>
            </FontString>
            <Button name="SimpleHealAI_MsgOff" inherits="UIPanelButtonTemplate" text="Off">
                <Size><AbsDimension x="65" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-156"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHealAI:SetMsgMode(0);</OnClick>
                    <OnEnter>SimpleHealAI:ShowTooltip("No chat messages.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Button>
            <Button name="SimpleHealAI_MsgAll" inherits="UIPanelButtonTemplate" text="All">
                <Size><AbsDimension x="65" y="24"/></Size>
                <Anchors><Anchor point="LEFT" relativeTo="SimpleHealAI_MsgOff" relativePoint="RIGHT"><Offset><AbsDimension x="5" y="0"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHealAI:SetMsgMode(1);</OnClick>
                    <OnEnter>SimpleHealAI:ShowTooltip("Show all healing actions.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Button>
            <Button name="SimpleHealAI_MsgNew" inherits="UIPanelButtonTemplate" text="New">
                <Size><AbsDimension x="65" y="24"/></Size>
                <Anchors><Anchor point="LEFT" relativeTo="SimpleHealAI_MsgAll" relativePoint="RIGHT"><Offset><AbsDimension x="5" y="0"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHealAI:SetMsgMode(2);</OnClick>
                    <OnEnter>SimpleHealAI:ShowTooltip("Show messages for new targets only.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Button>

            <!-- Threshold slider -->
            <FontString name="SimpleHealAI_ThreshLabel" inherits="GameFontNormal" text="Heal Threshold:">
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-195"/></Offset></Anchor></Anchors>
            </FontString>
            <Slider name="SimpleHealAI_ThreshSlider" inherits="OptionsSliderTemplate" minValue="50" maxValue="99" valueStep="5">
                <Size><AbsDimension x="200" y="16"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-218"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnValueChanged>SimpleHealAI:OnThresholdChange(this:GetValue());</OnValueChanged>
                    <OnEnter>SimpleHealAI:ShowTooltip("Heal units below this HP percentage.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Slider>

            <Button name="SimpleHealAI_ScanBtn" inherits="UIPanelButtonTemplate" text="Rescan Spells">
                <Size><AbsDimension x="140" y="24"/></Size>
                <Anchors><Anchor point="BOTTOM"><Offset><AbsDimension x="0" y="20"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHealAI:ScanSpells(); SimpleHealAI_ConfigFrame:Hide();</OnClick>
                    <OnEnter>SimpleHealAI:ShowTooltip("Scan spellbook for new ranks.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Button>
        </Frames>
        <Scripts>
            <OnMouseDown>this:StartMoving();</OnMouseDown>
            <OnMouseUp>this:StopMovingOrSizing();</OnMouseUp>
            <OnShow>SimpleHealAI:RefreshConfig();</OnShow>
        </Scripts>
    </Frame>
</Ui>
