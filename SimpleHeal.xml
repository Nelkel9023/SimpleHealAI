<Ui xmlns="http://www.blizzard.com/wow/ui/">
    <Script file="SimpleHeal.lua"/>

    <!-- Tooltip for spell parsing -->
    <GameTooltip name="SimpleHeal_Tooltip" inherits="GameTooltipTemplate" hidden="true"/>

    <!-- Main frame -->
    <Frame name="SimpleHeal_Frame">
        <Scripts>
            <OnLoad>SimpleHeal:OnLoad();</OnLoad>
            <OnEvent>SimpleHeal:OnEvent(event);</OnEvent>
        </Scripts>
    </Frame>

    <!-- Config frame -->
    <Frame name="SimpleHeal_ConfigFrame" toplevel="true" movable="true" enableMouse="true" frameStrata="DIALOG" hidden="true">
        <Size><AbsDimension x="240" y="420"/></Size>
        <Anchors><Anchor point="CENTER"/></Anchors>
        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
            <BackgroundInsets><AbsInset left="11" right="12" top="12" bottom="11"/></BackgroundInsets>
            <TileSize><AbsValue val="32"/></TileSize>
            <EdgeSize><AbsValue val="32"/></EdgeSize>
        </Backdrop>
        <Layers>
            <Layer level="ARTWORK">
                <FontString name="SimpleHeal_ConfigTitle" inherits="GameFontNormalLarge" text="SimpleHeal">
                    <Anchors><Anchor point="TOP" relativePoint="TOP"><Offset><AbsDimension x="0" y="-16"/></Offset></Anchor></Anchors>
                </FontString>
            </Layer>
        </Layers>
        <Frames>
            <Button name="SimpleHeal_CloseBtn" inherits="UIPanelCloseButton">
                <Anchors><Anchor point="TOPRIGHT"><Offset><AbsDimension x="-5" y="-5"/></Offset></Anchor></Anchors>
            </Button>

            <!-- Heal Mode -->
            <FontString name="SimpleHeal_ModeLabel" inherits="GameFontNormal" text="Heal Mode:">
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-45"/></Offset></Anchor></Anchors>
            </FontString>
            <Button name="SimpleHeal_ModeEff" inherits="UIPanelButtonTemplate" text="Eff">
                <Size><AbsDimension x="95" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-62"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHeal:SetHealMode(1);</OnClick>
                    <OnEnter>SimpleHeal:ShowTooltip("Efficient: best healing/mana ratio.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Button>
            <Button name="SimpleHeal_ModeSmart" inherits="UIPanelButtonTemplate" text="Smart">
                <Size><AbsDimension x="95" y="24"/></Size>
                <Anchors><Anchor point="LEFT" relativeTo="SimpleHeal_ModeEff" relativePoint="RIGHT"><Offset><AbsDimension x="10" y="0"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHeal:SetHealMode(2);</OnClick>
                    <OnEnter>SimpleHeal:ShowTooltip("Smart: smallest rank covering deficit.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Button>

            <!-- Toggles (LOS & Cleanse) -->
            <CheckButton name="SimpleHeal_ModeLOSCheck" inherits="OptionsCheckButtonTemplate">
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-100"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHeal:ToggleLOS();</OnClick>
                    <OnEnter>SimpleHeal:ShowTooltip("Check Line of Sight before healing.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </CheckButton>
            <FontString name="SimpleHeal_ModeLOSLabel" inherits="GameFontNormal" text="Line of Sight Check">
                <Anchors><Anchor point="LEFT" relativeTo="SimpleHeal_ModeLOSCheck" relativePoint="RIGHT"><Offset><AbsDimension x="5" y="0"/></Offset></Anchor></Anchors>
            </FontString>

            <CheckButton name="SimpleHeal_ModeCleanseCheck" inherits="OptionsCheckButtonTemplate">
                <Anchors><Anchor point="TOPLEFT" relativeTo="SimpleHeal_ModeLOSCheck" relativePoint="BOTTOMLEFT"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHeal:ToggleCleanse();</OnClick>
                    <OnEnter>SimpleHeal:ShowTooltip("Prioritize cleansing dispellable debuffs.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </CheckButton>
            <FontString name="SimpleHeal_ModeCleanseLabel" inherits="GameFontNormal" text="Enable Cleansing">
                <Anchors><Anchor point="LEFT" relativeTo="SimpleHeal_ModeCleanseCheck" relativePoint="RIGHT"><Offset><AbsDimension x="5" y="0"/></Offset></Anchor></Anchors>
            </FontString>

            <!-- Message Mode -->
            <FontString name="SimpleHeal_MsgLabel" inherits="GameFontNormal" text="Chat Messages:">
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-170"/></Offset></Anchor></Anchors>
            </FontString>
            <Button name="SimpleHeal_MsgOff" inherits="UIPanelButtonTemplate" text="Off">
                <Size><AbsDimension x="65" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-186"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHeal:SetMsgMode(0);</OnClick>
                    <OnEnter>SimpleHeal:ShowTooltip("No chat messages.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Button>
            <Button name="SimpleHeal_MsgAll" inherits="UIPanelButtonTemplate" text="All">
                <Size><AbsDimension x="65" y="24"/></Size>
                <Anchors><Anchor point="LEFT" relativeTo="SimpleHeal_MsgOff" relativePoint="RIGHT"><Offset><AbsDimension x="5" y="0"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHeal:SetMsgMode(1);</OnClick>
                    <OnEnter>SimpleHeal:ShowTooltip("Show all healing actions.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Button>
            <Button name="SimpleHeal_MsgNew" inherits="UIPanelButtonTemplate" text="New">
                <Size><AbsDimension x="65" y="24"/></Size>
                <Anchors><Anchor point="LEFT" relativeTo="SimpleHeal_MsgAll" relativePoint="RIGHT"><Offset><AbsDimension x="5" y="0"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHeal:SetMsgMode(2);</OnClick>
                    <OnEnter>SimpleHeal:ShowTooltip("Show messages for new targets only.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Button>

            <!-- Threshold slider -->
            <FontString name="SimpleHeal_ThreshLabel" inherits="GameFontNormal" text="Heal Threshold:">
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-225"/></Offset></Anchor></Anchors>
            </FontString>
            <Slider name="SimpleHeal_ThreshSlider" inherits="OptionsSliderTemplate" minValue="50" maxValue="99" valueStep="5">
                <Size><AbsDimension x="200" y="16"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-248"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnValueChanged>SimpleHeal:OnThresholdChange(this:GetValue());</OnValueChanged>
                    <OnEnter>SimpleHeal:ShowTooltip("Heal units below this HP percentage.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Slider>

            <!-- Low Mana Notification -->
            <CheckButton name="SimpleHeal_LowManaCheck" inherits="OptionsCheckButtonTemplate">
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-285"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHeal:ToggleLowManaNotify();</OnClick>
                    <OnEnter>SimpleHeal:ShowTooltip("Trigger /oom emote when mana is low.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </CheckButton>
            <FontString name="SimpleHeal_LowManaLabel" inherits="GameFontNormal" text="Low Mana Emote">
                <Anchors><Anchor point="LEFT" relativeTo="SimpleHeal_LowManaCheck" relativePoint="RIGHT"><Offset><AbsDimension x="5" y="0"/></Offset></Anchor></Anchors>
            </FontString>

            <FontString name="SimpleHeal_LowManaThreshLabel" inherits="GameFontNormal" text="Mana Threshold:">
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-320"/></Offset></Anchor></Anchors>
            </FontString>
            <Slider name="SimpleHeal_LowManaSlider" inherits="OptionsSliderTemplate" minValue="5" maxValue="50" valueStep="5">
                <Size><AbsDimension x="200" y="16"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="20" y="-343"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnValueChanged>SimpleHeal:OnLowManaThresholdChange(this:GetValue());</OnValueChanged>
                    <OnEnter>SimpleHeal:ShowTooltip("Emote threshold percentage.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Slider>

            <Button name="SimpleHeal_ScanBtn" inherits="UIPanelButtonTemplate" text="Rescan Spells">
                <Size><AbsDimension x="140" y="24"/></Size>
                <Anchors><Anchor point="BOTTOM"><Offset><AbsDimension x="0" y="20"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>SimpleHeal:ScanSpells(); SimpleHeal_ConfigFrame:Hide();</OnClick>
                    <OnEnter>SimpleHeal:ShowTooltip("Scan spellbook for new ranks.");</OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </Button>
        </Frames>
        <Scripts>
            <OnMouseDown>this:StartMoving();</OnMouseDown>
            <OnMouseUp>this:StopMovingOrSizing();</OnMouseUp>
            <OnShow>SimpleHeal:RefreshConfig();</OnShow>
        </Scripts>
    </Frame>
</Ui>
